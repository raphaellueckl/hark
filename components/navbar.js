import {
  resetA,
  BREAKPOINT_TABLET,
  BREAKPOINT_MOBILE,
} from "../css-globals.js";

const template = document.createElement("template");
template.innerHTML = `
<style>
  ${resetA}

  :host {
    width: 100%;
  }

  @media (min-width: ${BREAKPOINT_TABLET}px) {
    :host {
      width: 80%;
    }
  }

  #logo {
    margin-left: 10px;
  }
  
  a {
    display: flex;
    border-right: black solid 1px;
    justify-content: center;
    padding: 5px 10px;
    align-items: center;
  }

  a:last-child {
    border-right: none;
  }

  a > * {
    padding: 0 5px;
  }

  .menu-container {
    margin: 10px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .is-active svg {
    border-bottom: 3px solid rgb(214, 18, 22);
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
  }



  .navigation-links {
    display: flex;
  }

  .navbar-item-title {
    padding-bottom: 5px;
    display: none;
  }

  svg {
    padding-bottom: 5px;
  }
  
  @media (min-width: ${BREAKPOINT_MOBILE}px) {
    .navbar-item-title {
      display: flex;
      height: 24px;
      align-items: center;
    }
  }
</style>
<nav class="menu-container">
  <svg id="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 101.849 29" width="101.849" height="29"><g fill="#d61216" color="#d61216" transform="translate(0, 0) scale(0.6041667)"><svg width="29.0" height="48.0" x="0.0" y="0.0" viewBox="0 0 29 48"><path fill="currentColor" fill-rule="evenodd" d="M24 28.8l4.8 4.8L14.4 48 0 33.6l4.8-4.8 9.6 9.6 9.6-9.6zm-9.6-14.4L24 24l-9.6 9.6L4.8 24l9.6-9.6zm0-14.4l14.4 14.4-4.8 4.8-9.6-9.6-9.6 9.6L0 14.4 14.4 0z"></path></svg></g><line x1="29.521" y1="1" x2="29.521" y2="28" stroke="#152452" stroke-linecap="round"></line><path fill="#152452" fill-rule="nonzero" d="M13.61 13.25Q13.61 14.45 13.96 14.87Q14.30 15.29 15.26 15.34L15.26 15.34Q15.38 15.67 15.38 16.37L15.38 16.37Q13.94 16.30 12.48 16.30L12.48 16.30Q10.80 16.30 9.58 16.37L9.58 16.37Q9.58 15.67 9.70 15.34L9.70 15.34Q10.66 15.29 11.00 14.87Q11.35 14.45 11.35 13.25L11.35 13.25L11.35 8.50Q5.86 8.50 4.03 8.64L4.03 8.64L4.03 13.25Q4.03 14.45 4.38 14.87Q4.73 15.29 5.69 15.34L5.69 15.34Q5.81 15.67 5.81 16.37L5.81 16.37Q4.37 16.30 2.90 16.30L2.90 16.30Q1.22 16.30 0 16.37L0 16.37Q0 15.67 0.12 15.34L0.12 15.34Q1.08 15.29 1.43 14.87Q1.78 14.45 1.78 13.25L1.78 13.25L1.78 3.12Q1.78 1.92 1.43 1.50Q1.08 1.08 0.12 1.03L0.12 1.03Q0 0.70 0 0L0 0Q1.32 0.07 2.90 0.07L2.90 0.07Q4.37 0.07 5.81 0L5.81 0Q5.81 0.70 5.69 1.03L5.69 1.03Q4.73 1.08 4.38 1.50Q4.03 1.92 4.03 3.12L4.03 3.12L4.03 7.46L11.35 7.46L11.35 3.12Q11.35 1.92 11.00 1.50Q10.66 1.08 9.70 1.03L9.70 1.03Q9.58 0.70 9.58 0L9.58 0Q10.90 0.07 12.48 0.07L12.48 0.07Q13.94 0.07 15.38 0L15.38 0Q15.38 0.70 15.26 1.03L15.26 1.03Q14.30 1.08 13.96 1.50Q13.61 1.92 13.61 3.12L13.61 3.12L13.61 13.25ZM30.79 15.26Q30.91 15.62 30.91 16.34L30.91 16.34Q29.95 16.30 28.44 16.30L28.44 16.30Q26.86 16.30 25.90 16.34L25.90 16.34Q25.90 15.60 26.04 15.26L26.04 15.26Q26.59 15.19 26.82 15.06Q27.05 14.93 27.05 14.66L27.05 14.66Q27.05 14.45 26.81 13.92L26.81 13.92L26.33 12.89Q22.87 12.89 20.88 13.01L20.88 13.01L20.62 13.63Q20.38 14.18 20.38 14.50L20.38 14.50Q20.38 15.17 21.36 15.26L21.36 15.26Q21.50 15.70 21.50 16.34L21.50 16.34Q20.59 16.30 19.51 16.30L19.51 16.30Q18.58 16.30 17.81 16.34L17.81 16.34Q17.81 15.77 17.95 15.26L17.95 15.26Q18.48 15.17 18.77 14.82Q19.06 14.47 19.54 13.42L19.54 13.42L23.66 4.27Q24.12 4.18 24.62 4.18L24.62 4.18L29.04 13.34Q29.57 14.45 29.94 14.83Q30.31 15.22 30.79 15.26L30.79 15.26ZM21.36 11.90L25.85 11.90L24.41 8.88Q23.78 7.61 23.54 6.86L23.54 6.86Q23.35 7.46 23.08 8.05Q22.80 8.64 22.73 8.78L22.73 8.78L21.36 11.90ZM43.66 13.49Q44.30 14.45 44.99 14.84Q45.67 15.24 46.68 15.29L46.68 15.29Q46.68 15.98 46.58 16.30L46.58 16.30Q44.54 16.30 43.13 16.46L43.13 16.46Q42.96 16.18 42.48 15.46L42.48 15.46L41.40 13.70Q40.51 12.22 39.05 11.28L39.05 11.28L38.28 11.30L37.58 11.28L37.58 13.46Q37.58 14.26 37.70 14.64Q37.82 15.02 38.10 15.17Q38.38 15.31 38.95 15.34L38.95 15.34Q39.05 15.62 39.05 16.34L39.05 16.34Q38.16 16.30 36.43 16.30L36.43 16.30Q35.16 16.30 33.82 16.34L33.82 16.34Q33.82 15.67 33.94 15.34L33.94 15.34Q34.54 15.29 34.84 15.14Q35.14 15 35.26 14.64Q35.38 14.28 35.38 13.56L35.38 13.56L35.38 7.06Q35.38 6.02 35.09 5.69Q34.80 5.35 33.94 5.30L33.94 5.30Q33.82 4.94 33.82 4.25L33.82 4.25Q34.73 4.30 36.46 4.30L36.46 4.30L38.18 4.27Q39.43 4.22 40.08 4.22L40.08 4.22Q42.38 4.22 43.56 5.11Q44.74 6 44.74 7.39L44.74 7.39Q44.74 8.78 43.85 9.68Q42.96 10.58 41.38 10.90L41.38 10.90Q41.98 11.26 42.37 11.72Q42.77 12.19 43.66 13.49L43.66 13.49ZM38.50 10.10Q40.22 10.10 41.33 9.49Q42.43 8.88 42.43 7.70L42.43 7.70Q42.43 5.26 39.07 5.26L39.07 5.26Q38.30 5.26 37.58 5.40L37.58 5.40L37.58 10.03Q38.09 10.10 38.50 10.10L38.50 10.10ZM59.04 13.34Q59.74 14.11 60.62 14.66Q61.51 15.22 62.33 15.26L62.33 15.26Q62.33 15.94 62.21 16.30L62.21 16.30Q60.14 16.30 58.90 16.44L58.90 16.44Q58.01 15.31 56.42 13.63Q54.84 11.95 53.38 10.58L53.38 10.58L53.38 13.49Q53.38 14.52 53.68 14.87Q53.98 15.22 54.84 15.26L54.84 15.26Q54.94 15.62 54.94 16.34L54.94 16.34Q53.30 16.30 52.30 16.30L52.30 16.30Q51.10 16.30 49.61 16.34L49.61 16.34Q49.61 15.60 49.73 15.26L49.73 15.26Q50.33 15.22 50.63 15.07Q50.93 14.93 51.05 14.57Q51.17 14.21 51.17 13.49L51.17 13.49L51.17 7.08Q51.17 6.38 51.05 6.02Q50.93 5.66 50.63 5.52Q50.33 5.38 49.73 5.33L49.73 5.33Q49.61 4.97 49.61 4.25L49.61 4.25Q51.14 4.30 52.30 4.30L52.30 4.30Q53.26 4.30 54.94 4.25L54.94 4.25Q54.94 4.99 54.84 5.33L54.84 5.33Q53.98 5.38 53.68 5.71Q53.38 6.05 53.38 7.08L53.38 7.08L53.38 10.01L57.12 6.96Q58.13 6.14 58.13 5.74L58.13 5.74Q58.13 5.38 57.41 5.33L57.41 5.33Q57.29 4.94 57.29 4.25L57.29 4.25Q58.25 4.30 59.50 4.30L59.50 4.30Q60.62 4.30 61.78 4.25L61.78 4.25Q61.78 4.92 61.63 5.33L61.63 5.33Q60.91 5.35 60.28 5.66Q59.64 5.98 58.61 6.74L58.61 6.74L55.37 9.50Q56.93 10.99 59.04 13.34L59.04 13.34Z" transform="translate(39.521, 6.269)"></path></svg>
  <div class="navigation-links">
    <a href="/#/">
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"/></svg>
      <span class="navbar-item-title">Overview</span>
    </a>
    <a href="/#/manage">
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
      <span class="navbar-item-title">Assets</span>
    </a>
    <a href="/#/transactions">
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6.5 10h-2v7h2v-7zm6 0h-2v7h2v-7zm8.5 9H2v2h19v-2zm-2.5-9h-2v7h2v-7zm-7-6.74L16.71 6H6.29l5.21-2.74m0-2.26L2 6v2h19V6l-9.5-5z"/></svg>
      <span class="navbar-item-title">Transactions</span>
    </a>
    <a href="/#/settings">
      <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
    </a>
  </div>
</nav>`;

class Navbar extends HTMLElement {
  constructor() {
    super();
    let shadow = this.attachShadow({ mode: "open" });
    shadow.appendChild(template.content.cloneNode(true));
  }

  connectedCallback() {
    this.navElements = [...this.shadowRoot.querySelectorAll("a")];
    const activeElement = this.navElements
      .reverse()
      .find((navLink) => window.location.href.includes(navLink.href));
    activeElement?.classList?.add("is-active");

    this.navElements.forEach((navElem) => {
      navElem.addEventListener("click", (e) => {
        this.navElements.forEach((e) => e.classList?.remove("is-active"));
        navElem.classList.add("is-active");
      });
    });
  }
}

customElements.define("hk-navbar", Navbar);
